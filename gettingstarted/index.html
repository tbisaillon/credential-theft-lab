<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting Started - Credential Theft Lab</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "gettingstarted.md";
    var mkdocs_page_url = "/gettingstarted/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Credential Theft Lab</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Overview</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Getting Started</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#ec2-key-pair-creation">EC2 Key Pair Creation</a></li>
    

    <li class="toctree-l2"><a href="#cloudformation">CloudFormation</a></li>
    

    <li class="toctree-l2"><a href="#security-group-configuration">Security Group Configuration</a></li>
    

    <li class="toctree-l2"><a href="#log-in-to-firewall">Log In To Firewall</a></li>
    

    <li class="toctree-l2"><a href="#generate-globalprotect-portal-certificate">Generate GlobalProtect Portal Certificate</a></li>
    

    <li class="toctree-l2"><a href="#replace-external-gateway-in-globalprotect-portal-config">Replace External Gateway in GlobalProtect Portal Config</a></li>
    

    <li class="toctree-l2"><a href="#downloadactivate-globalprotect-client">Download/Activate GlobalProtect Client</a></li>
    

    <li class="toctree-l2"><a href="#create-phishing-victim-account">Create Phishing Victim Account</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../priorconfiguration/">What's Been Done For You</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../credentialphishing/">Credential Phishing Prevention</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../mfa/">Multi-Factor Authentication</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Credential Theft Lab</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1>Getting Started</h1>

<h2 id="ec2-key-pair-creation">EC2 Key Pair Creation</h2>
<p>If you've never used AWS before, you will need to create a SSH key pair that 
will be used for the initial login to EC2 instances.  If you've already got an 
SSH key pair that you would like to use in your desired region, feel free to 
skip this step.</p>
<p><img alt="Key Pairs" src="../img/key_pairs.png" /></p>
<p>In the EC2 section of the AWS console, click <strong>Key Pairs</strong>.</p>
<p><img alt="Create Key Pair 1" src="../img/create_key_pair_1.png" /></p>
<p>Click <strong>Create Key Pair</strong>, give your key pair a name, and click <strong>Create</strong>.</p>
<p><img alt="Create Key Pair 2" src="../img/create_key_pair_2.png" /></p>
<p>A SSH public/private key pair will be created for you, and the private key 
will be downloaded by the browser.  This key pair will be used to log into the firewall instance.  </p>
<p>For more information, see the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html?icmpid=docs_ec2_console&gt;">EC2 Key Pair documentation</a>.</p>
<h2 id="cloudformation">CloudFormation</h2>
<p>In CloudFormation, create a new stack using the following URL:</p>
<p><code>https://raw.githubusercontent.com/mrichardson03/credential-theft-lab/master/credential-theft-lab.json</code></p>
<p>This will always point to the latest version of the template.</p>
<p>CloudFormation will ask for a stack name.  You can call it whatever you want, but the rest of this 
guide assumes that it will be <strong>Credential-Theft-Lab</strong>.  Everything created by the template will 
use the stack name as a prefix so you can easily identify them.</p>
<p><img alt="Stack Details" src="../img/stack_details.png" /></p>
<p>The two parameters for the stack are <strong>BootstrapBucketName</strong> and <strong>KeyName</strong>.  The bootstrap bucket 
contains the initial configuration for the firewall (located <code>here</code> for reference), and the 
KeyName dropdown should be used to select the SSH key pair you want to log into the firewall 
initially.</p>
<p><img alt="Create Stack" src="../img/create_stack.png" /></p>
<p>Be sure to check the box "I acknowledge that AWS CloudFormation might create IAM resources" when 
creating the stack to create the bootstrap user and role.</p>
<p>The stack will create all the required AWS resources for you.  After the stack has finished, click 
the <strong>Outputs</strong> tab, and make note of the <strong>FirewallManagementInterface</strong> IP address, and the 
<strong>FirewallUntrustInterface</strong> IP address.  They will be used to access the management interface of 
the firewall and the GlobalProtect portal to access the rest of the environment.</p>
<h2 id="security-group-configuration">Security Group Configuration</h2>
<p>The created management security group for the firewall does not allow inbound access by default.<br />
In the AWS console, add HTTPS and SSH access from your IP to the 
<strong>Credential-Theft-Lab-FirewallManagementSecurityGroup</strong>.</p>
<p><img alt="Security Group 1" src="../img/security_group_1.png" /></p>
<p><img alt="Security Group 2" src="../img/security_group_2.png" /></p>
<p>The <strong>Credential-Theft-Lab-PublicSecurityGroup</strong>, which is associated to the firewall's untrust 
interface is wide open and should need no modifications.</p>
<h2 id="log-in-to-firewall">Log In To Firewall</h2>
<p>After giving the firewall instance around 5-10 minutes to initialize and bootstrap, use your SSH key 
to log in as the admin user and set the admin password.</p>
<h2 id="generate-globalprotect-portal-certificate">Generate GlobalProtect Portal Certificate</h2>
<p>The bootstrap configuration for the firewall contains a certificate authority for you, but you need 
to create a certificate for the IP address of the firewall's untrust interface.  Go to <strong>Device &gt; 
Certificate Management &gt; Certificates</strong> and create one similar to the following.</p>
<p><img alt="Replace Cert 1" src="../img/generate_cert_1.png" /></p>
<p>Go to <strong>Device &gt; Certificate Management &gt; SSL/TLS Service Profile</strong> and use the certificate you just
created in place of <strong>Placeholder-Cert</strong> in the <strong>GlobalProtect_SSL</strong> service profile.</p>
<p><img alt="Replace Cert 2" src="../img/generate_cert_2.png" /></p>
<h2 id="replace-external-gateway-in-globalprotect-portal-config">Replace External Gateway in GlobalProtect Portal Config</h2>
<p>In the Agent config section of the GlobalProtect portal configuration, navigate to the <strong>External</strong>
tab, and replace the external gateway IP address with your firewall's untrust interface.</p>
<p><img alt="External Gateway" src="../img/external_gateway.png" /></p>
<h2 id="downloadactivate-globalprotect-client">Download/Activate GlobalProtect Client</h2>
<p>If you don't have GlobalProtect installed on your laptop, download and activate the latest version 
on the firewall so you can download it when connecting to the GlobalProtect portal.</p>
<h2 id="create-phishing-victim-account">Create Phishing Victim Account</h2>
<p>We will be sending a phishing email as part of this lab.  You can either use a personal Gmail 
account, or you can create a new one for this lab if you wish.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../priorconfiguration/" class="btn btn-neutral float-right" title="What's Been Done For You">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../priorconfiguration/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
